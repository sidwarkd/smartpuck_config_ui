<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel='shortcut icon' href='favicon.png'>
  <meta name="description" content="Setup for the StatFeedr puck device">
  <meta name="author" content="">

  <title>Smart Puck Setup</title>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">

  <!-- Bootstrap core CSS -->
  <link href="bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <!-- <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet"> -->
  <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
    crossorigin="anonymous">

  <!-- Custom styles for this template -->
  <link href="style.css" rel="stylesheet">

</head>

<body id="page-top">

  <div id='get-started-step' class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step first-step">
    <div class="container">
      <h1 class="display-4">Smart Puck Setup</h1>
      <p class="lead text-black">Thank you so much for purchasing a Smart Puck. Getting it set up should
        only take a few minutes so let's get started.</p>
      <div class="alert alert-warning" role="alert">You may have a warning in your browser
        telling you this page is insecure. That's because your browser is concerned about us trying to
        connect to your puck. This is normal. The setup process doesn't transfer any of your data over the internet.
        Your WiFi password will be sent directly to the puck from your device in an encrypted way.</div>

      <button class="btn btn-primary clickable" id="getting-started-btn" attr-goto="connect-puck-step">Get Started</button>
    </div>
  </div>

  <div id="connect-puck-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step" style="display:none;">
    <div class="container">
      <img src="images/puck_plugin.gif" class="img-fluid" alt="Plugging USB cable into puck">
      <h3>Connect the Puck</h3>
      <p class="lead">Connect the provided USB cable to your puck.</p>
      <button class="btn btn-primary clickable" id="connect-puck-next" attr-goto="supply-power-step">Next</button>
    </div>
  </div>


  <div id="supply-power-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step" style="display:none;">
    <div class="container">
      <img src="images/laptop_plugin.gif" class="img-fluid" alt="Plugging USB cable into laptop">
      <h3>Supply Power</h3>
      <p class="lead">Connect the USB cable to a power source such as a cell phone charger or laptop.</p>
      <button class="btn btn-primary clickable" id="supply-power-next" attr-goto="select-device-step">Next</button>
    </div>
  </div>

  <div id="select-device-step" class="jumbotron jumbotron-fluid bg-white text-center wizard-step" style="display:none;">
    <div class="container">
      <p class="lead text-black">Select the type of device you are using to configure your puck.</p>
      <div class="card-deck">
        <div id="apple-device" class="card clickable" attr-goto="apple-device-selection-step">
          <img src="images/apple_logo.png" class="card-img-top" alt="Apple Logo">
          <div class="card-body">

          </div>
          <div class="card-footer">
            <small class="text-muted">Apple</small>
          </div>
        </div>
        <div id="android-device" class="card clickable" attr-goto="android-wifi-instructions-step">
          <img src="images/android_logo.png" class="card-img-top" alt="Android Logo">
          <div class="card-body">

          </div>
          <div class="card-footer">
            <small class="text-muted">Android</small>
          </div>
        </div>
        <div id="windows-device" class="card clickable" attr-goto="windows-wifi-instructions-step">
          <img src="images/windows_logo.png" class="card-img-top" alt="Windows Logo">
          <div class="card-body">
          </div>
          <div class="card-footer">
            <small class="text-muted">Windows</small>
          </div>
        </div>

      </div>
      <div class="col-auto" style="margin-top:15px;">
          <span class="badge badge-secondary clickable" style="pointer:default;" attr-goto="generic-wifi-instructions-step">Other Device Type</span>
      </div>
    </div>
  </div>

  <div id="apple-device-selection-step" class="jumbotron jumbotron-fluid bg-white text-center wizard-step" style="display:none;">
    <div class="container">
      <p class="lead text-black">What kind of Apple device are you using?</p>
      <div class="card-deck">

        <div class="card clickable" attr-goto="ios-wifi-instructions-step">
          <img src="images/iphone_stock.png" class="card-img-top" alt="iPhone image">
          <div class="card-body">

          </div>
          <div class="card-footer">
            <small class="text-muted">iPhone</small>
          </div>
        </div>

        <div class="card clickable" attr-goto="ios-wifi-instructions-step">
          <img src="images/ipad_stock.png" class="card-img-top" alt="iPad image">
          <div class="card-body">

          </div>
          <div class="card-footer">
            <small class="text-muted">iPad</small>
          </div>
        </div>

        <div class="card clickable" attr-goto="macbook-wifi-instructions-step">
          <img src="images/macbook_stock.png" class="card-img-top" alt="Macbook image">
          <div class="card-body">
          </div>
          <div class="card-footer">
            <small class="text-muted">Macbook</small>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div id="ios-wifi-instructions-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step"
    style="display:none;">
    <div class="container">
      <h1 class="display-4">WiFi Setup</h1>
      <p>To start your puck we need to connect it to the internet through your home WiFi network.
        This only has to be done once. Follow the steps
        below to get connected.
      </p>

      <ol class="text-left">
        <li>Open the <strong>Settings</strong> app <img src="images/apple_settings_logo.png" height="30" width="30" /></li>
        <li>Choose <strong>Wi-Fi</strong> to open the WiFi settings.</li>
        <li>Ensure WiFi is enabled and select the puck's network. It may take up to 30 seconds to appear. It will begin with
          <strong>MySmartPuck-</strong> followed by several characters similar to the image below. 
          <strong>Note:</strong> your puck network will have a different name than the network shown in the image.
        </li>

        <br /><img src="images/wifi-example.png" class="img-fluid rounded" /><br /><br />


        <li>Once your device is connected to the puck WiFi your settings will look similar to the following</li>

        <br /><img src="images/wifi_example_post.png" class="img-fluid rounded" /><br /><br />

        <li>Return to this setup page once connected and click <strong>Next</strong>.</li>

      </ol>

      <button class="btn btn-primary clickable" attr-goto="finding-puck-step">Next</button>
    </div>
  </div>

  <div id="macbook-wifi-instructions-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step"
    style="display:none;">
    <div class="container">
      <h1 class="display-4">WiFi Setup</h1>
      <p>To start your puck we need to connect it to the internet through your home WiFi network.
        This only has to be done once. In OSX this can be 
        done through System Preferences or via the menu bar. Instructions for both are provided below.
      </p>

      <hr/>
      <h3>Via the Menu Bar</h3>
      <hr/>
      <ol class="text-left">
        <li>Click on the WiFi indicator in your menu bar to show a list of available WiFi
            networks. It's normally located in the upper righthand corner of your screen.</li>

        <br /><img src="images/macbook_wifi_menu_bar.png" class="img-fluid rounded" /><br /><br />

        <li>Ensure WiFi is enabled and select the puck's network from the list. It will begin with <strong>MySmartPuck-</strong>
          followed by several characters similar to the image above.
          <strong>Note:</strong> your puck network will have a different name than the network shown in the image.
        </li>
        <li>Once your device is connected to the puck WiFi a check will appear next to the network name as follows</li>

        <br /><img src="images/macbook_wifi_menu_bar_post.png" class="img-fluid rounded" /><br /><br />

        <li>Return to this setup page once connected and click <strong>Next</strong> below.</li>
      </ol>

      <hr/>
      <h3>Via System Preferences</h3>
      <hr/>
      <ol class="text-left">
        <li>Open <strong>System Preferences</strong> and select <strong>Network</strong>.</li>

        <br /><img src="images/macbook_wifi_example.png" class="img-fluid rounded" /><br /><br />

        <li>Ensure WiFi is enabled and select the puck's network from the dropdown. It will begin with <strong>MySmartPuck-</strong>
          followed by several characters.</li>

        <li>Once your device is connected to the puck WiFi your settings will look similar to the image below.
        <strong>Note:</strong> your puck network will have a different name than the network shown in the image.
        </li>

        <br /><img src="images/macbook_wifi_example_post.png" class="img-fluid rounded" /><br /><br />

        <li>Return to this setup page once connected and click <strong>Next</strong>.</li>
      </ol>

      <button class="btn btn-primary clickable" attr-goto="finding-puck-step">Next</button>
    </div>
  </div>

  <div id="android-wifi-instructions-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step"
    style="display:none;">
    <div class="container">
      <h1 class="display-4">WiFi Setup</h1>
      <p>To start your puck we need to connect it to the internet through your home WiFi network.
        This only has to be done once. Follow the steps
        below to get connected.
      </p>

      <ol class="text-left">
        <li>Open the <strong>Settings</strong> app <img src="images/android_settings_logo.png" height="30" width="30" /></li>
        <li>Choose <strong>Connections</strong> followed by <strong>Wi-Fi</strong> to open the WiFi settings</li>
        <li>Ensure WiFi is enabled and select the puck's network. It will begin with
          <strong>MySmartPuck-</strong> followed by several characters similar to the image below.
          <strong>Note:</strong> your puck network will have a different name than the network shown in the image.
        </li>

        <br /><img src="images/wifi_example_android.png" class="img-fluid rounded" /><br /><br />

        <li>When you select the puck's network disable "Auto reconnect"</li>

        <br /><img src="images/no_auto_reconnect.png" class="img-fluid rounded" /><br /><br />

        <li>Tap <strong>Connect</strong></li>
        <li>Your device will notice it can't get to the internet through the puck and might show a notification like
          the image below.</li>

        <br /><img src="images/android_no_internet_notification.png" class="img-fluid rounded" /><br /><br />

        <li>Tap <strong>Dismiss</strong></li>
        <li>Once your device is connected to the puck WiFi your settings will look similar to the following</li>

        <br /><img src="images/wifi_example_android_post.png" class="img-fluid rounded" /><br /><br />

        <li>Return to this setup page once connected and click <strong>Next</strong>.</li>

      </ol>

      <button class="btn btn-primary clickable" attr-goto="finding-puck-step">Next</button>
    </div>
  </div>

  <div id="windows-wifi-instructions-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step"
    style="display:none;">
    <div class="container">
      <h1 class="display-4">WiFi Setup</h1>
      <p>To start your puck we need to connect it to the internet through your home WiFi network.
        This only has to be done once. In Windows this can be 
        done through the Settings app or via the menu bar. Instructions for both are provided below.
      </p>

      <hr/>
      <h3>Via the Menu Bar</h3>
      <hr/>
      <ol class="text-left">
          <li>Click on the WiFi/Network indicator in your menu bar to show a list of available WiFi
            networks. It's normally located in the lower righthand corner of your screen by the date and time.
            A list of available networks will appear.</li>
  
          <br/><img src="images/wifi_example_windows.png" class="img-fluid rounded" /><br /><br />
  
          <li>Ensure WiFi is enabled and select the puck's network from the list. It will begin with <strong>MySmartPuck-</strong>
            followed by several characters similar to the image below. <strong>Note:</strong> your puck 
            network will have a different name than the network shown in the image.</li>
  
          <br/><img src="images/wifi_example_windows.png" class="img-fluid rounded" /><br /><br />
  
          <li>After selecting the puck network you will be prompted to connect to it. Be sure "Connect automatically" is unchecked.</li>
  
          <br/><img src="images/windows_select_network.png" class="img-fluid rounded" /><br /><br />
  
          <li>Click <strong>Connect</strong>. It may take up to a minute to connect to the puck.</li>
          <li>Once your device is connected to the puck WiFi the network will look similar to the following</li>
  
          <br/><img src="images/wifi_example_windows_post.png" class="img-fluid rounded" /><br /><br />
  
          <li>Return to this setup page once connected and click <strong>Next</strong></li>
      </ol>

      <hr/>
      <h3>Via The Settings App</h3>
      <hr/>
      <ol class="text-left">
        <li>Open the <strong>Settings</strong> app <img src="images/windows_settings_icon.png" height="30" width="30" /></li>
        <li>Select <strong>Network & Internet</strong>.

        <br/><br/><img src="images/windows_network_icon.png" class="img-fluid rounded" /><br /><br />

        <li>On the Network Status page click "Show available networks". The network list will appear.</li>

        <br/><img src="images/windows_network_settings.png" class="img-fluid rounded" /><br /><br />

        <li>Select the puck's network from the list. It will begin with <strong>MySmartPuck-</strong>
          followed by several characters similar to the image below. <strong>Note:</strong> your puck 
          network will have a different name than the network shown in the image.</li>

        <br/><img src="images/wifi_example_windows.png" class="img-fluid rounded" /><br /><br />

        <li>After selecting the puck network you will be prompted to connect to it. Be sure "Connect automatically" is unchecked.</li>

        <br/><img src="images/windows_select_network.png" class="img-fluid rounded" /><br /><br />

        <li>Click <strong>Connect</strong>. It may take up to a minute to connect to the puck.</li>
        <li>Once your device is connected to the puck WiFi the network will look similar to the following</li>

        <br/><img src="images/wifi_example_windows_post.png" class="img-fluid rounded" /><br /><br />

        <li>Return to this setup page once connected and click <strong>Next</strong> below.</li>
      </ol>

      <button class="btn btn-primary clickable" attr-goto="finding-puck-step">Next</button>
    </div>
  </div>


  <div id="generic-wifi-instructions-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step"
    style="display:none;">
    <div class="container">
      <h1 class="display-4">WiFi Setup</h1>
      <p>To start your puck we need to connect it to the internet through your home WiFi network.
        This only has to be done once. Here are some generic
        instructions on how to do that.
      </p>

      <ol class="text-left">
        <li>Open the WiFi Settings on your device.</li>
        <li>Ensure WiFi is enabled and search for nearby WiFi networks.</li>
        <li>Select the puck's network. It will begin with
          <strong>MySmartPuck-</strong> followed by several characters similar to the image below.
          <strong>Note:</strong> your puck network will have a different name than the network shown in the image.
        </li>

        <br /><img src="images/wifi-example.png" class="img-fluid rounded" /><br /><br />

        <li>Dismiss any warnings about the puck WiFi not having access to the internet. It may also be
          necessary to disable cellular data so your device doesn't ignore the puck WiFi as it does not
          have access to the internet.
        </li>
        <li>Once your device is connected to the puck WiFi return to this setup page and click <strong>Next</strong>.</li>

      </ol>

      <button class="btn btn-primary clickable" attr-goto="finding-puck-step">Next</button>
    </div>
  </div>

  <div id="finding-puck-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step" style="display:none;"
    attr-onload="getDeviceInfo()">
    <div class="container">
      <h1 class="display-4">Searching</h1>
      <p>I'm trying to connect to your puck. Please wait...
      </p>
      <div class="spinner-grow text-info" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </div>

  <div id="puck-found-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step" style="display:none;"
    attr-precall="getDeviceInfo()">
    <div class="container">
      <h3 class="display-4">Puck Found!</h3>
      <p>Below is a list of nearby networks the puck found. Select your network from the list, enter your password,
        and click <strong>Connect</strong>. Your password will be encrypted and sent directly to the puck (not over the
        intenet) so it can connect to your WiFi network.
      </p>
      <p>The color next to each network indicates how strong the signal is. Green is excellent, yellow is ok, and red
        means the signal is likely too poor for the puck to work. To get a better signal move your puck closer to 
        your WiFi source and scan again.
      </p>

      <div class="row">
        <div class="col-auto mr-auto"></div>
        <div class="col-auto">
          <span class="badge badge-secondary" style="cursor:default;" onclick="scan()">
            <i class="fas fa-sync-alt" title="Refresh Network List"></i> Scan Again
          </span>
        </div>
      </div>
      <div id="networks-div">
        <div id="searching-for-wifi" class="spinner-grow text-info text-center" role="status" style="display: block">
          <span class="sr-only">Scanning for WiFi networks...</span>
        </div>
        <ul id="wifi_list" class="list-group text-black" style="margin-bottom: 15px; display: none;"></ul>
      </div>

      <form id="connect-form">
        <div class="form-row align-items-center">
          <div class="col-auto">
            <label class="sr-only" for="password">Name</label>
            <input type="password" class="form-control mb-2" id="password" placeholder="Your WiFi password">
          </div>

          <div class="col-auto">
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="showPassword" onclick="toggleShow()">
              <label class="form-check-label" for="showPassword">
                Show password
              </label>
            </div>
          </div>
        </div>
      </form>
      <button id="wifi-connect-button" type="submit" class="btn btn-primary mb-2" onclick="configure()">Connect</button>
    </div>
  </div>

  <div id="puck-comm-error-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step" style="display:none;"
    attr-precall="getDeviceInfo()">
    <div class="container">
      <h3 class="display-4">Uh oh!</h3>
      <p>I'm having trouble finding your puck. Make sure the phone, tablet or computer you are using is connected to the
        MySmartPuck WiFi network and try again.</p>

        <button class="btn btn-primary clickable" id="uh-oh-start-over-btn" attr-goto="get-started-step">Start Over</button>
    </div>
  </div>

  <div id="puck-test-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step"
    style="display:none;">
    <div class="container">

      <h3 class="display-4">Did It Work?</h3>

      <p class="lead">We sent your password directly to the puck and now it's trying to connect to your WiFi and get stats. 
        If successful it will display those stats within 20 seconds. 
      </p>

      <button class="btn btn-success clickable" id="test-success-btn" attr-goto="puck-setup-finished-step">It Worked!</button>
      <br/>
      <br/>
      <button class="btn btn-danger clickable" id="test-fail-btn" attr-goto="puck-setup-failed-step">It Didn't Update :(</button>

    </div>
  </div>

  <div id="puck-setup-finished-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step"
    style="display:none;">
    <div class="container">

      <h3 class="display-4">That's It!</h3>

      <p class="lead">Your puck will display the latest stats after each game. All you have to do is keep it within WiFi
        range and it will take care of the rest.</p>


      <p class="lead">We want to sincerely thank you again for purchasing a StatFeedr product. If you have any trouble with 
        it please reach out to <strong>support@statfeedr.com</strong>.
      </p>

      <div class="alert alert-primary" role="alert">Remember to leave your puck plugged in for <strong>8 hours</strong> to 
        allow it to charge completely.</div>

      <h3>Enjoy Your Puck!</h3>
    </div>
  </div>

  <div id="puck-setup-failed-step" class="jumbotron jumbotron-fluid bg-white text-black text-center wizard-step"
    style="display:none;">
    <div class="container">

      <p class="lead">If your puck doesn't update the most common issue is an incorrect WiFi password.
        Don't worry, it happens. We can just go through the setup process again. You might want 
        to use the "Show password" checkbox the next time you enter it just to be sure you're typing 
        it correctly and also verify that your caps lock isn't on.</p>

      <button class="btn btn-primary clickable" id="setup-failed-start-over-btn" attr-goto="get-started-step">Start Over</button>
      <br/>
      <br/>

      <div class="alert alert-warning" role="alert">If you're sure your password is correct and you've tried multiple times then 
        it's time to reach out to support so we can get this resolved. Simply email us at 
        <strong>support@statfeedr.com</strong> and we'll figure this out together.
      </div>

    </div>
  </div>

  <script src='rsa-utils/jsbn_1.js'></script>
  <script src='rsa-utils/jsbn_2.js'></script>
  <script src='rsa-utils/prng4.js'></script>
  <script src='rsa-utils/rng.js'></script>
  <script src='rsa-utils/rsa.js'></script>
  <script src='script.js'></script>
  <script>
    documentReady();
  </script>
</body>

</html>